Browser-Based Cloud Dev Environment
Complete Architecture & Implementation Guide
This is going to be comprehensive. I'll cover everything you need to build this and make it stand out.

The Reality Check First
Traditional Docker-based cloud IDEs (Gitpod, Codespaces) require expensive infrastructure. But there's a brilliant alternative that's actually more impressive technically:
WebContainers â€” StackBlitz's technology that runs Node.js entirely in the browser using WebAssembly. No server-side containers needed.
This approach is:

âœ… Free to run (no container costs)
âœ… Deployable on Vercel
âœ… Technically more impressive (WASM-based)
âœ… Instant startup (no container spin-up time)
âœ… What StackBlitz (valued at $100M+) is built on


High-Level Architecture
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              FRONTEND (Vercel)                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Monaco    â”‚  â”‚  File Tree  â”‚  â”‚  xterm.js   â”‚  â”‚   Preview Frame     â”‚ â”‚
â”‚  â”‚   Editor    â”‚  â”‚  Explorer   â”‚  â”‚  Terminal   â”‚  â”‚   (Live Server)     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚                                         â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                    â”‚      WebContainer API         â”‚                        â”‚
â”‚                    â”‚   (Runs Node.js in Browser)   â”‚                        â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â”‚ Auth, Storage, Sharing
                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              BACKEND (Render)                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Auth      â”‚  â”‚  Project    â”‚  â”‚  GitHub     â”‚  â”‚   Collaboration     â”‚ â”‚
â”‚  â”‚   Service   â”‚  â”‚  Storage    â”‚  â”‚  Integrationâ”‚  â”‚   (WebSocket)       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                    â”‚                                         â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                    â”‚      PostgreSQL (Neon)        â”‚                        â”‚
â”‚                    â”‚      + Redis (Upstash)        â”‚                        â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Tech Stack (All Free Tiers)
LayerTechnologyFree TierWhy This ChoiceFrontendNext.js 14Vercel FreeSSR, API routes, great DXEditorMonaco EditorFreeSame as VS CodeTerminalxterm.jsFreeIndustry standardRuntimeWebContainersFreeNode.js in browserStylingTailwind + shadcn/uiFreeProfessional look fastBackendNode.js + ExpressRender FreeSimple, sufficientDatabaseNeon PostgreSQLFree 500MBServerless PostgresCache/RealtimeUpstash RedisFree 10K/dayWebSocket pub/subAuthNextAuth.jsFreeGitHub OAuth built-inFile StorageSupabase StorageFree 1GBProject file persistenceDeploymentVercel + RenderFreeProduction-ready

Feature Breakdown
Core Features (MVP)
FeatureComplexityUser ValuePriorityMonaco editor with syntax highlightingMediumHighP0File tree with create/delete/renameMediumHighP0Terminal with npm/node commandsHighCriticalP0Live preview of web appsMediumHighP0GitHub import (clone repos)MediumHighP0Project templates (React, Node, etc.)LowHighP0User authenticationLowMediumP1Save/load projectsMediumHighP1Shareable project linksLowHighP1
Standout Features (Differentiators)
FeatureWhy It ImpressesMulti-file tabs with unsaved indicatorsAttention to detailIntegrated package.json dependency viewerDeveloper UXCommand palette (Cmd+Shift+P)Power user featureTheme switching (dark/light/custom)PolishSplit pane editorPro-level IDEReal-time collaboration (cursor sharing)Technical depthAI code assistant integrationModern, usefulEnvironment variables managementProduction awareness

Detailed Component Architecture
Frontend Structure
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ page.tsx                    # Landing page
â”‚   â”œâ”€â”€ editor/[projectId]/
â”‚   â”‚   â””â”€â”€ page.tsx                # Main IDE view
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ auth/[...nextauth]/     # Auth endpoints
â”‚   â”‚   â”œâ”€â”€ projects/               # Project CRUD
â”‚   â”‚   â””â”€â”€ github/                 # GitHub integration
â”‚   â””â”€â”€ layout.tsx
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ide/
â”‚   â”‚   â”œâ”€â”€ IDELayout.tsx           # Main container
â”‚   â”‚   â”œâ”€â”€ Editor/
â”‚   â”‚   â”‚   â”œâ”€â”€ MonacoEditor.tsx    # Code editor wrapper
â”‚   â”‚   â”‚   â”œâ”€â”€ EditorTabs.tsx      # File tabs
â”‚   â”‚   â”‚   â””â”€â”€ EditorToolbar.tsx   # Actions bar
â”‚   â”‚   â”œâ”€â”€ FileTree/
â”‚   â”‚   â”‚   â”œâ”€â”€ FileExplorer.tsx    # Tree component
â”‚   â”‚   â”‚   â”œâ”€â”€ FileNode.tsx        # Individual file/folder
â”‚   â”‚   â”‚   â””â”€â”€ FileContextMenu.tsx # Right-click menu
â”‚   â”‚   â”œâ”€â”€ Terminal/
â”‚   â”‚   â”‚   â”œâ”€â”€ TerminalPanel.tsx   # Terminal container
â”‚   â”‚   â”‚   â”œâ”€â”€ TerminalTabs.tsx    # Multiple terminals
â”‚   â”‚   â”‚   â””â”€â”€ TerminalInstance.tsx# Single terminal
â”‚   â”‚   â”œâ”€â”€ Preview/
â”‚   â”‚   â”‚   â”œâ”€â”€ PreviewPanel.tsx    # iframe preview
â”‚   â”‚   â”‚   â””â”€â”€ PreviewToolbar.tsx  # URL bar, refresh
â”‚   â”‚   â””â”€â”€ Sidebar/
â”‚   â”‚       â”œâ”€â”€ ActivityBar.tsx     # Icon sidebar
â”‚   â”‚       â””â”€â”€ PanelSwitcher.tsx   # Files/Search/Git
â”‚   â”œâ”€â”€ landing/
â”‚   â”‚   â”œâ”€â”€ Hero.tsx
â”‚   â”‚   â”œâ”€â”€ Features.tsx
â”‚   â”‚   â””â”€â”€ Templates.tsx
â”‚   â””â”€â”€ ui/                         # shadcn components
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ webcontainer/
â”‚   â”‚   â”œâ”€â”€ instance.ts             # WebContainer singleton
â”‚   â”‚   â”œâ”€â”€ filesystem.ts           # File operations
â”‚   â”‚   â””â”€â”€ terminal.ts             # Terminal bridge
â”‚   â”œâ”€â”€ editor/
â”‚   â”‚   â”œâ”€â”€ languages.ts            # Language configs
â”‚   â”‚   â””â”€â”€ themes.ts               # Editor themes
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ github.ts               # GitHub API helpers
â”‚       â””â”€â”€ templates.ts            # Project templates
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useWebContainer.ts          # WebContainer hook
â”‚   â”œâ”€â”€ useFileSystem.ts            # File operations
â”‚   â”œâ”€â”€ useTerminal.ts              # Terminal state
â”‚   â””â”€â”€ useProject.ts               # Project management
â”œâ”€â”€ stores/
â”‚   â”œâ”€â”€ editorStore.ts              # Zustand: open files, active tab
â”‚   â”œâ”€â”€ fileStore.ts                # Zustand: file tree state
â”‚   â””â”€â”€ terminalStore.ts            # Zustand: terminal instances
â””â”€â”€ types/
    â”œâ”€â”€ editor.ts
    â”œâ”€â”€ filesystem.ts
    â””â”€â”€ project.ts
Backend Structure
server/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts                    # Express app entry
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ auth.ts                 # Auth routes
â”‚   â”‚   â”œâ”€â”€ projects.ts             # Project CRUD
â”‚   â”‚   â”œâ”€â”€ github.ts               # GitHub integration
â”‚   â”‚   â””â”€â”€ collaborate.ts          # WebSocket routes
â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”œâ”€â”€ projectController.ts
â”‚   â”‚   â”œâ”€â”€ githubController.ts
â”‚   â”‚   â””â”€â”€ collaborateController.ts
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ projectService.ts
â”‚   â”‚   â”œâ”€â”€ githubService.ts
â”‚   â”‚   â””â”€â”€ storageService.ts
â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”œâ”€â”€ auth.ts
â”‚   â”‚   â””â”€â”€ rateLimit.ts
â”‚   â”œâ”€â”€ db/
â”‚   â”‚   â”œâ”€â”€ schema.ts               # Drizzle schema
â”‚   â”‚   â””â”€â”€ index.ts                # DB connection
â”‚   â””â”€â”€ websocket/
â”‚       â”œâ”€â”€ server.ts               # WS server setup
â”‚       â””â”€â”€ handlers.ts             # WS event handlers
â””â”€â”€ package.json

Database Schema
sql-- Users table
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    github_id VARCHAR(255) UNIQUE NOT NULL,
    username VARCHAR(255) NOT NULL,
    email VARCHAR(255),
    avatar_url TEXT,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

-- Projects table
CREATE TABLE projects (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    name VARCHAR(255) NOT NULL,
    description TEXT,
    template VARCHAR(50), -- 'react', 'node', 'vue', etc.
    is_public BOOLEAN DEFAULT false,
    share_id VARCHAR(20) UNIQUE, -- Short shareable ID
    github_repo VARCHAR(255), -- If imported from GitHub
    files JSONB, -- File structure snapshot
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

-- Project collaborators
CREATE TABLE collaborators (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    project_id UUID REFERENCES projects(id) ON DELETE CASCADE,
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    permission VARCHAR(20) DEFAULT 'read', -- 'read', 'write', 'admin'
    created_at TIMESTAMP DEFAULT NOW(),
    UNIQUE(project_id, user_id)
);

-- Project versions (for undo/redo and history)
CREATE TABLE project_versions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    project_id UUID REFERENCES projects(id) ON DELETE CASCADE,
    files JSONB NOT NULL,
    message VARCHAR(255),
    created_at TIMESTAMP DEFAULT NOW()
);

-- Indexes
CREATE INDEX idx_projects_user_id ON projects(user_id);
CREATE INDEX idx_projects_share_id ON projects(share_id);
CREATE INDEX idx_collaborators_project ON collaborators(project_id);

Core Implementation Details
1. WebContainer Integration
This is the heart of your project. WebContainers run a full Node.js environment in the browser.
typescript// lib/webcontainer/instance.ts
import { WebContainer } from '@webcontainer/api';

let webcontainerInstance: WebContainer | null = null;

export async function getWebContainer(): Promise<WebContainer> {
  if (!webcontainerInstance) {
    webcontainerInstance = await WebContainer.boot();
  }
  return webcontainerInstance;
}

export async function mountFiles(
  files: Record<string, any>
): Promise<void> {
  const container = await getWebContainer();
  await container.mount(files);
}

export async function runCommand(
  command: string,
  args: string[]
): Promise<WebContainerProcess> {
  const container = await getWebContainer();
  return container.spawn(command, args);
}

export async function startDevServer(): Promise<string> {
  const container = await getWebContainer();
  
  // Install dependencies
  const installProcess = await container.spawn('npm', ['install']);
  await installProcess.exit;
  
  // Start dev server
  const devProcess = await container.spawn('npm', ['run', 'dev']);
  
  // Wait for server URL
  return new Promise((resolve) => {
    container.on('server-ready', (port, url) => {
      resolve(url);
    });
  });
}
2. File System Hook
typescript// hooks/useFileSystem.ts
import { useState, useCallback } from 'react';
import { getWebContainer } from '@/lib/webcontainer/instance';

interface FileNode {
  name: string;
  type: 'file' | 'directory';
  path: string;
  children?: FileNode[];
  content?: string;
}

export function useFileSystem() {
  const [files, setFiles] = useState<FileNode[]>([]);
  const [loading, setLoading] = useState(false);

  const readDirectory = useCallback(async (path: string = '/') => {
    const container = await getWebContainer();
    const entries = await container.fs.readdir(path, { withFileTypes: true });
    
    const nodes: FileNode[] = await Promise.all(
      entries.map(async (entry) => {
        const fullPath = `${path}/${entry.name}`.replace('//', '/');
        
        if (entry.isDirectory()) {
          return {
            name: entry.name,
            type: 'directory' as const,
            path: fullPath,
            children: await readDirectoryRecursive(fullPath),
          };
        }
        
        return {
          name: entry.name,
          type: 'file' as const,
          path: fullPath,
        };
      })
    );
    
    return nodes.sort((a, b) => {
      if (a.type !== b.type) return a.type === 'directory' ? -1 : 1;
      return a.name.localeCompare(b.name);
    });
  }, []);

  const readFile = useCallback(async (path: string): Promise<string> => {
    const container = await getWebContainer();
    return container.fs.readFile(path, 'utf-8');
  }, []);

  const writeFile = useCallback(async (path: string, content: string) => {
    const container = await getWebContainer();
    await container.fs.writeFile(path, content);
  }, []);

  const createFile = useCallback(async (path: string) => {
    const container = await getWebContainer();
    await container.fs.writeFile(path, '');
  }, []);

  const createDirectory = useCallback(async (path: string) => {
    const container = await getWebContainer();
    await container.fs.mkdir(path, { recursive: true });
  }, []);

  const deleteNode = useCallback(async (path: string) => {
    const container = await getWebContainer();
    await container.fs.rm(path, { recursive: true });
  }, []);

  const renameNode = useCallback(async (oldPath: string, newPath: string) => {
    const container = await getWebContainer();
    const content = await container.fs.readFile(oldPath, 'utf-8');
    await container.fs.writeFile(newPath, content);
    await container.fs.rm(oldPath);
  }, []);

  return {
    files,
    loading,
    readDirectory,
    readFile,
    writeFile,
    createFile,
    createDirectory,
    deleteNode,
    renameNode,
    refreshFiles: () => readDirectory('/').then(setFiles),
  };
}
3. Terminal Component
typescript// components/ide/Terminal/TerminalInstance.tsx
'use client';

import { useEffect, useRef } from 'react';
import { Terminal } from 'xterm';
import { FitAddon } from 'xterm-addon-fit';
import { WebLinksAddon } from 'xterm-addon-web-links';
import { getWebContainer } from '@/lib/webcontainer/instance';
import 'xterm/css/xterm.css';

interface TerminalInstanceProps {
  onData?: (data: string) => void;
}

export function TerminalInstance({ onData }: TerminalInstanceProps) {
  const terminalRef = useRef<HTMLDivElement>(null);
  const xtermRef = useRef<Terminal | null>(null);
  const fitAddonRef = useRef<FitAddon | null>(null);

  useEffect(() => {
    if (!terminalRef.current) return;

    // Initialize xterm
    const terminal = new Terminal({
      theme: {
        background: '#1e1e1e',
        foreground: '#d4d4d4',
        cursor: '#d4d4d4',
        cursorAccent: '#1e1e1e',
        selectionBackground: '#264f78',
        black: '#1e1e1e',
        red: '#f44747',
        green: '#6a9955',
        yellow: '#dcdcaa',
        blue: '#569cd6',
        magenta: '#c586c0',
        cyan: '#4ec9b0',
        white: '#d4d4d4',
      },
      fontFamily: '"Fira Code", "JetBrains Mono", monospace',
      fontSize: 14,
      lineHeight: 1.4,
      cursorBlink: true,
      cursorStyle: 'bar',
    });

    const fitAddon = new FitAddon();
    const webLinksAddon = new WebLinksAddon();

    terminal.loadAddon(fitAddon);
    terminal.loadAddon(webLinksAddon);
    terminal.open(terminalRef.current);
    fitAddon.fit();

    xtermRef.current = terminal;
    fitAddonRef.current = fitAddon;

    // Connect to WebContainer shell
    async function connectShell() {
      const container = await getWebContainer();
      const shellProcess = await container.spawn('jsh', {
        terminal: {
          cols: terminal.cols,
          rows: terminal.rows,
        },
      });

      // Pipe shell output to terminal
      shellProcess.output.pipeTo(
        new WritableStream({
          write(data) {
            terminal.write(data);
          },
        })
      );

      // Pipe terminal input to shell
      const input = shellProcess.input.getWriter();
      terminal.onData((data) => {
        input.write(data);
        onData?.(data);
      });

      // Handle resize
      terminal.onResize(({ cols, rows }) => {
        shellProcess.resize({ cols, rows });
      });
    }

    connectShell();

    // Handle window resize
    const handleResize = () => {
      fitAddon.fit();
    };
    window.addEventListener('resize', handleResize);

    return () => {
      window.removeEventListener('resize', handleResize);
      terminal.dispose();
    };
  }, [onData]);

  return (
    <div 
      ref={terminalRef} 
      className="h-full w-full bg-[#1e1e1e]"
    />
  );
}
4. Monaco Editor Setup
typescript// components/ide/Editor/MonacoEditor.tsx
'use client';

import { useRef, useEffect, useCallback } from 'react';
import Editor, { OnMount, OnChange } from '@monaco-editor/react';
import { useEditorStore } from '@/stores/editorStore';
import { useFileSystem } from '@/hooks/useFileSystem';

interface MonacoEditorProps {
  filePath: string;
  language?: string;
}

export function MonacoEditor({ filePath, language }: MonacoEditorProps) {
  const editorRef = useRef<any>(null);
  const { writeFile } = useFileSystem();
  const { 
    activeFile, 
    openFiles, 
    updateFileContent, 
    markFileDirty 
  } = useEditorStore();

  const file = openFiles.find(f => f.path === filePath);

  const handleEditorMount: OnMount = (editor, monaco) => {
    editorRef.current = editor;

    // Register custom themes
    monaco.editor.defineTheme('customDark', {
      base: 'vs-dark',
      inherit: true,
      rules: [],
      colors: {
        'editor.background': '#1e1e1e',
        'editor.lineHighlightBackground': '#2a2a2a',
        'editorLineNumber.foreground': '#858585',
        'editorLineNumber.activeForeground': '#c6c6c6',
      },
    });
    monaco.editor.setTheme('customDark');

    // Add keyboard shortcuts
    editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyCode.KeyS, () => {
      handleSave();
    });

    // Focus editor
    editor.focus();
  };

  const handleChange: OnChange = (value) => {
    if (value !== undefined) {
      updateFileContent(filePath, value);
      markFileDirty(filePath, true);
    }
  };

  const handleSave = useCallback(async () => {
    if (!file) return;
    await writeFile(filePath, file.content);
    markFileDirty(filePath, false);
  }, [file, filePath, writeFile, markFileDirty]);

  const getLanguage = (path: string): string => {
    const ext = path.split('.').pop()?.toLowerCase();
    const languageMap: Record<string, string> = {
      js: 'javascript',
      jsx: 'javascript',
      ts: 'typescript',
      tsx: 'typescript',
      json: 'json',
      html: 'html',
      css: 'css',
      scss: 'scss',
      md: 'markdown',
      py: 'python',
      go: 'go',
      rs: 'rust',
      yml: 'yaml',
      yaml: 'yaml',
    };
    return languageMap[ext || ''] || 'plaintext';
  };

  if (!file) return null;

  return (
    <Editor
      height="100%"
      language={language || getLanguage(filePath)}
      value={file.content}
      onMount={handleEditorMount}
      onChange={handleChange}
      options={{
        minimap: { enabled: true, scale: 0.75 },
        fontSize: 14,
        fontFamily: '"Fira Code", "JetBrains Mono", monospace',
        fontLigatures: true,
        lineNumbers: 'on',
        renderLineHighlight: 'line',
        scrollBeyondLastLine: false,
        automaticLayout: true,
        tabSize: 2,
        wordWrap: 'on',
        padding: { top: 16 },
        smoothScrolling: true,
        cursorBlinking: 'smooth',
        cursorSmoothCaretAnimation: 'on',
        bracketPairColorization: { enabled: true },
        guides: {
          bracketPairs: true,
          indentation: true,
        },
      }}
      loading={
        <div className="flex items-center justify-center h-full bg-[#1e1e1e]">
          <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500" />
        </div>
      }
    />
  );
}
5. File Tree Component
typescript// components/ide/FileTree/FileExplorer.tsx
'use client';

import { useState } from 'react';
import { 
  ChevronRight, 
  ChevronDown, 
  File, 
  Folder,
  FolderOpen,
  Plus,
  Trash2,
  Edit2
} from 'lucide-react';
import { cn } from '@/lib/utils';
import { useEditorStore } from '@/stores/editorStore';
import { useFileSystem } from '@/hooks/useFileSystem';
import {
  ContextMenu,
  ContextMenuContent,
  ContextMenuItem,
  ContextMenuTrigger,
  ContextMenuSeparator,
} from '@/components/ui/context-menu';

interface FileNode {
  name: string;
  type: 'file' | 'directory';
  path: string;
  children?: FileNode[];
}

interface FileNodeProps {
  node: FileNode;
  depth?: number;
}

// File/folder icons by extension
const getFileIcon = (name: string) => {
  const ext = name.split('.').pop()?.toLowerCase();
  const iconMap: Record<string, { color: string }> = {
    js: { color: 'text-yellow-400' },
    jsx: { color: 'text-blue-400' },
    ts: { color: 'text-blue-500' },
    tsx: { color: 'text-blue-400' },
    json: { color: 'text-yellow-300' },
    html: { color: 'text-orange-500' },
    css: { color: 'text-blue-300' },
    md: { color: 'text-gray-400' },
    py: { color: 'text-green-400' },
    go: { color: 'text-cyan-400' },
  };
  return iconMap[ext || ''] || { color: 'text-gray-400' };
};

function FileNodeComponent({ node, depth = 0 }: FileNodeProps) {
  const [isExpanded, setIsExpanded] = useState(depth < 2);
  const [isRenaming, setIsRenaming] = useState(false);
  const [newName, setNewName] = useState(node.name);
  
  const { openFile, activeFile, openFiles } = useEditorStore();
  const { deleteNode, renameNode, createFile, createDirectory, readFile } = useFileSystem();

  const isActive = activeFile === node.path;
  const isOpen = openFiles.some(f => f.path === node.path);
  const fileStyle = getFileIcon(node.name);

  const handleClick = async () => {
    if (node.type === 'directory') {
      setIsExpanded(!isExpanded);
    } else {
      const content = await readFile(node.path);
      openFile({ path: node.path, name: node.name, content, isDirty: false });
    }
  };

  const handleDelete = async () => {
    if (confirm(`Delete ${node.name}?`)) {
      await deleteNode(node.path);
    }
  };

  const handleRename = async () => {
    if (newName && newName !== node.name) {
      const newPath = node.path.replace(node.name, newName);
      await renameNode(node.path, newPath);
    }
    setIsRenaming(false);
  };

  const handleNewFile = async () => {
    const name = prompt('File name:');
    if (name) {
      const path = node.type === 'directory' 
        ? `${node.path}/${name}` 
        : `${node.path.substring(0, node.path.lastIndexOf('/'))}/${name}`;
      await createFile(path);
    }
  };

  const handleNewFolder = async () => {
    const name = prompt('Folder name:');
    if (name) {
      const path = node.type === 'directory' 
        ? `${node.path}/${name}` 
        : `${node.path.substring(0, node.path.lastIndexOf('/'))}/${name}`;
      await createDirectory(path);
    }
  };

  return (
    <ContextMenu>
      <ContextMenuTrigger>
        <div>
          <div
            className={cn(
              'flex items-center gap-1 px-2 py-1 cursor-pointer hover:bg-[#2a2d2e] rounded-sm group',
              isActive && 'bg-[#37373d]',
              isOpen && !isActive && 'text-blue-400'
            )}
            style={{ paddingLeft: `${depth * 12 + 8}px` }}
            onClick={handleClick}
          >
            {node.type === 'directory' ? (
              <>
                {isExpanded ? (
                  <ChevronDown className="w-4 h-4 text-gray-400 flex-shrink-0" />
                ) : (
                  <ChevronRight className="w-4 h-4 text-gray-400 flex-shrink-0" />
                )}
                {isExpanded ? (
                  <FolderOpen className="w-4 h-4 text-yellow-400 flex-shrink-0" />
                ) : (
                  <Folder className="w-4 h-4 text-yellow-400 flex-shrink-0" />
                )}
              </>
            ) : (
              <>
                <span className="w-4" />
                <File className={cn('w-4 h-4 flex-shrink-0', fileStyle.color)} />
              </>
            )}
            
            {isRenaming ? (
              <input
                type="text"
                value={newName}
                onChange={(e) => setNewName(e.target.value)}
                onBlur={handleRename}
                onKeyDown={(e) => e.key === 'Enter' && handleRename()}
                className="bg-[#3c3c3c] text-sm px-1 outline-none border border-blue-500 rounded"
                autoFocus
              />
            ) : (
              <span className="text-sm text-gray-300 truncate">{node.name}</span>
            )}
          </div>

          {node.type === 'directory' && isExpanded && node.children && (
            <div>
              {node.children.map((child) => (
                <FileNodeComponent
                  key={child.path}
                  node={child}
                  depth={depth + 1}
                />
              ))}
            </div>
          )}
        </div>
      </ContextMenuTrigger>
      
      <ContextMenuContent className="bg-[#252526] border-[#454545]">
        <ContextMenuItem onClick={handleNewFile} className="text-gray-300">
          <Plus className="w-4 h-4 mr-2" /> New File
        </ContextMenuItem>
        <ContextMenuItem onClick={handleNewFolder} className="text-gray-300">
          <Folder className="w-4 h-4 mr-2" /> New Folder
        </ContextMenuItem>
        <ContextMenuSeparator />
        <ContextMenuItem onClick={() => setIsRenaming(true)} className="text-gray-300">
          <Edit2 className="w-4 h-4 mr-2" /> Rename
        </ContextMenuItem>
        <ContextMenuItem onClick={handleDelete} className="text-red-400">
          <Trash2 className="w-4 h-4 mr-2" /> Delete
        </ContextMenuItem>
      </ContextMenuContent>
    </ContextMenu>
  );
}

export function FileExplorer({ files }: { files: FileNode[] }) {
  return (
    <div className="h-full overflow-auto bg-[#252526] py-2">
      {files.map((file) => (
        <FileNodeComponent key={file.path} node={file} />
      ))}
    </div>
  );
}
6. Preview Panel
typescript// components/ide/Preview/PreviewPanel.tsx
'use client';

import { useState, useEffect, useRef } from 'react';
import { RefreshCw, ExternalLink, X, Smartphone, Monitor } from 'lucide-react';
import { cn } from '@/lib/utils';
import { getWebContainer } from '@/lib/webcontainer/instance';

export function PreviewPanel() {
  const [url, setUrl] = useState<string | null>(null);
  const [isLoading, setIsLoading] = useState(true);
  const [viewMode, setViewMode] = useState<'desktop' | 'mobile'>('desktop');
  const iframeRef = useRef<HTMLIFrameElement>(null);

  useEffect(() => {
    async function listenForServer() {
      const container = await getWebContainer();
      
      container.on('server-ready', (port, serverUrl) => {
        setUrl(serverUrl);
        setIsLoading(false);
      });
    }

    listenForServer();
  }, []);

  const handleRefresh = () => {
    if (iframeRef.current) {
      iframeRef.current.src = iframeRef.current.src;
    }
  };

  const handleOpenExternal = () => {
    if (url) {
      window.open(url, '_blank');
    }
  };

  return (
    <div className="h-full flex flex-col bg-[#1e1e1e]">
      {/* Toolbar */}
      <div className="flex items-center gap-2 px-3 py-2 bg-[#252526] border-b border-[#3c3c3c]">
        <button
          onClick={handleRefresh}
          className="p-1.5 hover:bg-[#3c3c3c] rounded transition-colors"
          title="Refresh"
        >
          <RefreshCw className="w-4 h-4 text-gray-400" />
        </button>
        
        <div className="flex-1 flex items-center bg-[#3c3c3c] rounded px-3 py-1">
          <span className="text-sm text-gray-400 truncate">
            {url || 'Waiting for server...'}
          </span>
        </div>

        <div className="flex items-center gap-1 border-l border-[#3c3c3c] pl-2 ml-2">
          <button
            onClick={() => setViewMode('desktop')}
            className={cn(
              'p-1.5 rounded transition-colors',
              viewMode === 'desktop' ? 'bg-[#3c3c3c]' : 'hover:bg-[#3c3c3c]'
            )}
            title="Desktop view"
          >
            <Monitor className="w-4 h-4 text-gray-400" />
          </button>
          <button
            onClick={() => setViewMode('mobile')}
            className={cn(
              'p-1.5 rounded transition-colors',
              viewMode === 'mobile' ? 'bg-[#3c3c3c]' : 'hover:bg-[#3c3c3c]'
            )}
            title="Mobile view"
          >
            <Smartphone className="w-4 h-4 text-gray-400" />
          </button>
        </div>

        <button
          onClick={handleOpenExternal}
          className="p-1.5 hover:bg-[#3c3c3c] rounded transition-colors"
          title="Open in new tab"
          disabled={!url}
        >
          <ExternalLink className="w-4 h-4 text-gray-400" />
        </button>
      </div>

      {/* Preview iframe */}
      <div className="flex-1 flex items-center justify-center p-4 bg-[#1e1e1e]">
        {isLoading ? (
          <div className="flex flex-col items-center gap-4">
            <div className="animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500" />
            <p className="text-gray-400 text-sm">Starting development server...</p>
          </div>
        ) : url ? (
          <div
            className={cn(
              'bg-white rounded-lg overflow-hidden shadow-2xl transition-all duration-300',
              viewMode === 'mobile' ? 'w-[375px] h-[667px]' : 'w-full h-full'
            )}
          >
            <iframe
              ref={iframeRef}
              src={url}
              className="w-full h-full border-0"
              title="Preview"
              sandbox="allow-scripts allow-same-origin allow-forms allow-popups"
            />
          </div>
        ) : (
          <div className="text-gray-500 text-center">
            <p>No preview available</p>
            <p className="text-sm mt-2">Run a dev server to see preview</p>
          </div>
        )}
      </div>
    </div>
  );
}
7. State Management
typescript// stores/editorStore.ts
import { create } from 'zustand';

interface OpenFile {
  path: string;
  name: string;
  content: string;
  isDirty: boolean;
}

interface EditorState {
  openFiles: OpenFile[];
  activeFile: string | null;
  
  openFile: (file: OpenFile) => void;
  closeFile: (path: string) => void;
  setActiveFile: (path: string) => void;
  updateFileContent: (path: string, content: string) => void;
  markFileDirty: (path: string, isDirty: boolean) => void;
}

export const useEditorStore = create<EditorState>((set, get) => ({
  openFiles: [],
  activeFile: null,

  openFile: (file) => {
    const { openFiles } = get();
    const exists = openFiles.find(f => f.path === file.path);
    
    if (exists) {
      set({ activeFile: file.path });
    } else {
      set({
        openFiles: [...openFiles, file],
        activeFile: file.path,
      });
    }
  },

  closeFile: (path) => {
    const { openFiles, activeFile } = get();
    const newFiles = openFiles.filter(f => f.path !== path);
    
    let newActive = activeFile;
    if (activeFile === path) {
      const index = openFiles.findIndex(f => f.path === path);
      newActive = newFiles[Math.max(0, index - 1)]?.path || null;
    }
    
    set({ openFiles: newFiles, activeFile: newActive });
  },

  setActiveFile: (path) => set({ activeFile: path }),

  updateFileContent: (path, content) => {
    set((state) => ({
      openFiles: state.openFiles.map(f =>
        f.path === path ? { ...f, content } : f
      ),
    }));
  },

  markFileDirty: (path, isDirty) => {
    set((state) => ({
      openFiles: state.openFiles.map(f =>
        f.path === path ? { ...f, isDirty } : f
      ),
    }));
  },
}));
8. Project Templates
typescript// lib/utils/templates.ts
export const templates = {
  react: {
    name: 'React + Vite',
    icon: 'âš›ï¸',
    files: {
      'package.json': {
        file: {
          contents: JSON.stringify({
            name: 'react-project',
            private: true,
            version: '0.0.0',
            type: 'module',
            scripts: {
              dev: 'vite',
              build: 'vite build',
              preview: 'vite preview'
            },
            dependencies: {
              react: '^18.2.0',
              'react-dom': '^18.2.0'
            },
            devDependencies: {
              '@vitejs/plugin-react': '^4.0.0',
              vite: '^4.4.0'
            }
          }, null, 2)
        }
      },
      'vite.config.js': {
        file: {
          contents: `import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],
})`
        }
      },
      'index.html': {
        file: {
          contents: `<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>React App</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>`
        }
      },
      src: {
        directory: {
          'main.jsx': {
            file: {
              contents: `import React from 'react'
import ReactDOM from 'react-dom/client'
import App from './App'
import './index.css'

ReactDOM.createRoot(document.getElementById('root')).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>,
)`
            }
          },
          'App.jsx': {
            file: {
              contents: `import { useState } from 'react'

function App() {
  const [count, setCount] = useState(0)

  return (
    <div className="app">
      <h1>Hello React!</h1>
      <button onClick={() => setCount(c => c + 1)}>
        Count: {count}
      </button>
    </div>
  )
}

export default App`
            }
          },
          'index.css': {
            file: {
              contents: `* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, sans-serif;
  background: #1a1a2e;
  color: white;
  min-height: 100vh;
}

.app {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  gap: 1rem;
}

button {
  padding: 0.75rem 1.5rem;
  font-size: 1rem;
  border: none;
  border-radius: 0.5rem;
  background: #4f46e5;
  color: white;
  cursor: pointer;
  transition: background 0.2s;
}

button:hover {
  background: #4338ca;
}`
            }
          }
        }
      }
    }
  },
  
  node: {
    name: 'Node.js',
    icon: 'ğŸŸ¢',
    files: {
      'package.json': {
        file: {
          contents: JSON.stringify({
            name: 'node-project',
            version: '1.0.0',
            type: 'module',
            scripts: {
              start: 'node index.js',
              dev: 'node --watch index.js'
            }
          }, null, 2)
        }
      },
      'index.js': {
        file: {
          contents: `console.log('Hello from Node.js!');

// Simple HTTP server
import { createServer } from 'http';

const server = createServer((req, res) => {
  res.writeHead(200, { 'Content-Type': 'text/html' });
  res.end('<h1>Hello World!</h1>');
});

server.listen(3000, () => {
  console.log('Server running at http://localhost:3000/');
});`
        }
      }
    }
  },

  vanilla: {
    name: 'Vanilla JS',
    icon: 'ğŸ“œ',
    files: {
      'package.json': {
        file: {
          contents: JSON.stringify({
            name: 'vanilla-project',
            version: '1.0.0',
            scripts: {
              dev: 'vite',
              build: 'vite build'
            },
            devDependencies: {
              vite: '^4.4.0'
            }
          }, null, 2)
        }
      },
      'index.html': {
        file: {
          contents: `<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vanilla JS</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <h1>Hello World!</h1>
    <script type="module" src="main.js"></script>
  </body>
</html>`
        }
      },
      'style.css': {
        file: {
          contents: `body {
  font-family: system-ui, sans-serif;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
}`
        }
      },
      'main.js': {
        file: {
          contents: `console.log('Hello from JavaScript!');`
        }
      }
    }
  }
};

export type TemplateKey = keyof typeof templates;

Main IDE Layout
typescript// components/ide/IDELayout.tsx
'use client';

import { useState, useEffect } from 'react';
import { Panel, PanelGroup, PanelResizeHandle } from 'react-resizable-panels';
import { FileExplorer } from './FileTree/FileExplorer';
import { MonacoEditor } from './Editor/MonacoEditor';
import { EditorTabs } from './Editor/EditorTabs';
import { TerminalPanel } from './Terminal/TerminalPanel';
import { PreviewPanel } from './Preview/PreviewPanel';
import { ActivityBar } from './Sidebar/ActivityBar';
import { useEditorStore } from '@/stores/editorStore';
import { useFileSystem } from '@/hooks/useFileSystem';
import { useWebContainer } from '@/hooks/useWebContainer';

export function IDELayout() {
  const [activePanel, setActivePanel] = useState<'files' | 'search' | 'git'>('files');
  const [showTerminal, setShowTerminal] = useState(true);
  const [showPreview, setShowPreview] = useState(true);
  
  const { files, refreshFiles } = useFileSystem();
  const { activeFile, openFiles } = useEditorStore();
  const { isBooting, error } = useWebContainer();

  useEffect(() => {
    refreshFiles();
  }, [refreshFiles]);

  if (isBooting) {
    return (
      <div className="h-screen flex items-center justify-center bg-[#1e1e1e]">
        <div className="flex flex-col items-center gap-4">
          <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500" />
          <p className="text-gray-400">Booting development environment...</p>
        </div>
      </div>
    );
  }

  if (error) {
    return (
      <div className="h-screen flex items-center justify-center bg-[#1e1e1e]">
        <div className="text-center">
          <p className="text-red-400 text-lg">Failed to start environment</p>
          <p className="text-gray-500 mt-2">{error}</p>
        </div>
      </div>
    );
  }

  return (
    <div className="h-screen flex bg-[#1e1e1e] text-white overflow-hidden">
      {/* Activity Bar */}
      <ActivityBar 
        activePanel={activePanel} 
        onPanelChange={setActivePanel}
        onToggleTerminal={() => setShowTerminal(!showTerminal)}
        onTogglePreview={() => setShowPreview(!showPreview)}
      />

      {/* Main Content */}
      <PanelGroup direction="horizontal" className="flex-1">
        {/* Sidebar */}
        <Panel defaultSize={20} minSize={15} maxSize={40}>
          <div className="h-full border-r border-[#3c3c3c]">
            <div className="px-4 py-3 text-xs font-semibold text-gray-400 uppercase tracking-wider">
              Explorer
            </div>
            <FileExplorer files={files} />
          </div>
        </Panel>

        <PanelResizeHandle className="w-1 bg-[#3c3c3c] hover:bg-blue-500 transition-colors" />

        {/* Editor + Terminal */}
        <Panel defaultSize={showPreview ? 50 : 80}>
          <PanelGroup direction="vertical">
            {/* Editor Area */}
            <Panel defaultSize={showTerminal ? 70 : 100}>
              <div className="h-full flex flex-col">
                <EditorTabs />
                <div className="flex-1">
                  {activeFile ? (
                    <MonacoEditor filePath={activeFile} />
                  ) : (
                    <div className="h-full flex items-center justify-center text-gray-500">
                      <div className="text-center">
                        <p className="text-lg">No file open</p>
                        <p className="text-sm mt-2">Select a file from the explorer</p>
                      </div>
                    </div>
                  )}
                </div>
              </div>
            </Panel>

            {showTerminal && (
              <>
                <PanelResizeHandle className="h-1 bg-[#3c3c3c] hover:bg-blue-500 transition-colors" />
                <Panel defaultSize={30} minSize={10}>
                  <TerminalPanel />
                </Panel>
              </>
            )}
          </PanelGroup>
        </Panel>

        {showPreview && (
          <>
            <PanelResizeHandle className="w-1 bg-[#3c3c3c] hover:bg-blue-500 transition-colors" />
            <Panel defaultSize={30} minSize={20}>
              <PreviewPanel />
            </Panel>
          </>
        )}
      </PanelGroup>
    </div>
  );
}

Landing Page
typescript// app/page.tsx
'use client';

import { useState } from 'react';
import { useRouter } from 'next/navigation';
import { 
  Play, 
  Github, 
  Code2, 
  Terminal, 
  Layout, 
  Zap,
  Globe,
  Users
} from 'lucide-react';
import { templates, TemplateKey } from '@/lib/utils/templates';

export default function Home() {
  const router = useRouter();
  const [githubUrl, setGithubUrl] = useState('');
  const [isLoading, setIsLoading] = useState(false);

  const handleLaunchTemplate = (template: TemplateKey) => {
    router.push(`/editor/new?template=${template}`);
  };

  const handleImportGithub = async () => {
    if (!githubUrl) return;
    setIsLoading(true);
    router.push(`/editor/new?github=${encodeURIComponent(githubUrl)}`);
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-[#0a0a0f] via-[#1a1a2e] to-[#16213e]">
      {/* Hero Section */}
      <div className="max-w-6xl mx-auto px-6 pt-20 pb-16">
        <div className="text-center">
          <div className="inline-flex items-center gap-2 px-4 py-2 bg-blue-500/10 border border-blue-500/20 rounded-full text-blue-400 text-sm mb-8">
            <Zap className="w-4 h-4" />
            Instant cloud development environments
          </div>
          
          <h1 className="text-5xl md:text-7xl font-bold text-white mb-6 leading-tight">
            Code in the cloud.
            <br />
            <span className="bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 text-transparent bg-clip-text">
              No setup required.
            </span>
          </h1>
          
          <p className="text-xl text-gray-400 max-w-2xl mx-auto mb-12">
            Full VS Code experience in your browser. Start coding in seconds with 
            pre-configured environments for React, Node.js, and more.
          </p>

          {/* GitHub Import */}
          <div className="max-w-xl mx-auto mb-16">
            <div className="flex gap-3">
              <div className="flex-1 relative">
                <Github className="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500" />
                <input
                  type="text"
                  placeholder="Paste GitHub repository URL..."
                  value={githubUrl}
                  onChange={(e) => setGithubUrl(e.target.value)}
                  className="w-full pl-12 pr-4 py-4 bg-[#252526] border border-[#3c3c3c] rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-blue-500 transition-colors"
                />
              </div>
              <button
                onClick={handleImportGithub}
                disabled={!githubUrl || isLoading}
                className="px-6 py-4 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white font-medium rounded-xl flex items-center gap-2 transition-colors"
              >
                <Play className="w-5 h-5" />
                Launch
              </button>
            </div>
          </div>
        </div>

        {/* Templates Grid */}
        <div className="mb-16">
          <h2 className="text-2xl font-semibold text-white text-center mb-8">
            Or start with a template
          </h2>
          
          <div className="grid md:grid-cols-3 gap-4 max-w-3xl mx-auto">
            {Object.entries(templates).map(([key, template]) => (
              <button
                key={key}
                onClick={() => handleLaunchTemplate(key as TemplateKey)}
                className="group p-6 bg-[#252526] hover:bg-[#2d2d2d] border border-[#3c3c3c] hover:border-blue-500/50 rounded-xl text-left transition-all duration-200"
              >
                <div className="text-3xl mb-3">{template.icon}</div>
                <h3 className="text-lg font-medium text-white group-hover:text-blue-400 transition-colors">
                  {template.name}
                </h3>
                <p className="text-sm text-gray-500 mt-1">
                  Click to launch instantly
                </p>
              </button>
            ))}
          </div>
        </div>

        {/* Features */}
        <div className="grid md:grid-cols-3 gap-8 max-w-4xl mx-auto">
          <div className="text-center">
            <div className="w-12 h-12 bg-blue-500/10 rounded-xl flex items-center justify-center mx-auto mb-4">
              <Code2 className="w-6 h-6 text-blue-400" />
            </div>
            <h3 className="text-lg font-medium text-white mb-2">Full IDE Experience</h3>
            <p className="text-gray-500">Monaco editor with IntelliSense, syntax highlighting, and keyboard shortcuts.</p>
          </div>
          
          <div className="text-center">
            <div className="w-12 h-12 bg-purple-500/10 rounded-xl flex items-center justify-center mx-auto mb-4">
              <Terminal className="w-6 h-6 text-purple-400" />
            </div>
            <h3 className="text-lg font-medium text-white mb-2">Integrated Terminal</h3>
            <p className="text-gray-500">Full shell access. Run npm, node, and any CLI tools directly in your browser.</p>
          </div>
          
          <div className="text-center">
            <div className="w-12 h-12 bg-pink-500/10 rounded-xl flex items-center justify-center mx-auto mb-4">
              <Layout className="w-6 h-6 text-pink-400" />
            </div>
            <h3 className="text-lg font-medium text-white mb-2">Live Preview</h3>
            <p className="text-gray-500">See your changes instantly. Hot reload built-in for all frameworks.</p>
          </div>
        </div>
      </div>

      {/* Footer */}
      <div className="border-t border-[#3c3c3c] py-8 mt-16">
        <div className="max-w-6xl mx-auto px-6 text-center text-gray-500 text-sm">
          Built by Shravankumar Janawade â€¢ Powered by WebContainers
        </div>
      </div>
    </div>
  );
}

API Routes
GitHub Import
typescript// app/api/github/route.ts
import { NextRequest, NextResponse } from 'next/server';

export async function POST(req: NextRequest) {
  try {
    const { repoUrl } = await req.json();
    
    // Parse GitHub URL
    const match = repoUrl.match(/github\.com\/([^\/]+)\/([^\/]+)/);
    if (!match) {
      return NextResponse.json({ error: 'Invalid GitHub URL' }, { status: 400 });
    }
    
    const [, owner, repo] = match;
    
    // Fetch repository contents using GitHub API
    const response = await fetch(
      `https://api.github.com/repos/${owner}/${repo}/contents`,
      {
        headers: {
          Accept: 'application/vnd.github.v3+json',
          // Add token if available for higher rate limits
          ...(process.env.GITHUB_TOKEN && {
            Authorization: `token ${process.env.GITHUB_TOKEN}`,
          }),
        },
      }
    );
    
    if (!response.ok) {
      throw new Error('Failed to fetch repository');
    }
    
    const contents = await response.json();
    
    // Recursively fetch all files
    const files = await fetchAllFiles(owner, repo, contents);
    
    return NextResponse.json({ files });
  } catch (error) {
    console.error('GitHub import error:', error);
    return NextResponse.json(
      { error: 'Failed to import repository' },
      { status: 500 }
    );
  }
}

async function fetchAllFiles(
  owner: string, 
  repo: string, 
  contents: any[], 
  path = ''
): Promise<Record<string, any>> {
  const files: Record<string, any> = {};
  
  for (const item of contents) {
    if (item.type === 'file') {
      // Fetch file content
      const fileResponse = await fetch(item.download_url);
      const content = await fileResponse.text();
      
      files[item.name] = {
        file: { contents: content }
      };
    } else if (item.type === 'dir') {
      // Recursively fetch directory
      const dirResponse = await fetch(item.url);
      const dirContents = await dirResponse.json();
      
      files[item.name] = {
        directory: await fetchAllFiles(owner, repo, dirContents, item.path)
      };
    }
  }
  
  return files;
}
Project Save/Load
typescript// app/api/projects/route.ts
import { NextRequest, NextResponse } from 'next/server';
import { getServerSession } from 'next-auth';
import { db } from '@/lib/db';
import { projects } from '@/lib/db/schema';
import { eq } from 'drizzle-orm';
import { nanoid } from 'nanoid';

// Get all projects for user
export async function GET(req: NextRequest) {
  const session = await getServerSession();
  
  if (!session?.user) {
    return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
  }
  
  const userProjects = await db
    .select()
    .from(projects)
    .where(eq(projects.userId, session.user.id));
  
  return NextResponse.json({ projects: userProjects });
}

// Create new project
export async function POST(req: NextRequest) {
  const session = await getServerSession();
  
  if (!session?.user) {
    return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
  }
  
  const { name, template, files } = await req.json();
  
  const shareId = nanoid(10);
  
  const [newProject] = await db
    .insert(projects)
    .values({
      userId: session.user.id,
      name,
      template,
      files,
      shareId,
      isPublic: false,
    })
    .returning();
  
  return NextResponse.json({ project: newProject });
}

Deployment Configuration
Vercel (vercel.json)
json{
  "framework": "nextjs",
  "buildCommand": "npm run build",
  "headers": [
    {
      "source": "/(.*)",
      "headers": [
        {
          "key": "Cross-Origin-Embedder-Policy",
          "value": "require-corp"
        },
        {
          "key": "Cross-Origin-Opener-Policy",
          "value": "same-origin"
        }
      ]
    }
  ]
}
Important: WebContainers require these COOP/COEP headers to work.
Environment Variables
env# .env.local

# Database (Neon)
DATABASE_URL=postgresql://...

# Auth (NextAuth)
NEXTAUTH_SECRET=your-secret-key
NEXTAUTH_URL=https://your-domain.vercel.app

# GitHub OAuth
GITHUB_CLIENT_ID=...
GITHUB_CLIENT_SECRET=...

# Optional: GitHub API token for higher rate limits
GITHUB_TOKEN=...

# Upstash Redis (for real-time features)
UPSTASH_REDIS_REST_URL=...
UPSTASH_REDIS_REST_TOKEN=...
```

---

## Build Timeline

| Week | Focus | Deliverables |
|------|-------|--------------|
| **Week 1** | Core Setup | Next.js project, WebContainer integration, basic Monaco editor working |
| **Week 2** | File System | File tree, create/delete/rename, multi-tab editor |
| **Week 3** | Terminal | xterm.js integration, shell commands working, npm install/run |
| **Week 4** | Preview | Live preview panel, dev server detection, mobile/desktop toggle |
| **Week 5** | Templates & GitHub | Project templates, GitHub import, template selection UI |
| **Week 6** | Auth & Storage | NextAuth GitHub OAuth, project save/load, shareable links |
| **Week 7** | Polish | Landing page, responsive design, error handling, loading states |
| **Week 8** | Deploy & Test | Vercel deployment, bug fixes, performance optimization |

---

## Resume Bullet (When Complete)
```
- Built browser-based cloud IDE running Node.js entirely in WebAssembly, 
  featuring Monaco editor, integrated terminal, and live preview with 
  sub-second environment boot time â€” no server-side containers required

What Makes This Stand Out
AspectWhy It ImpressesWebContainersYou understand WASM and browser capabilitiesNo Container CostsClever architecture decisionFull IDE in BrowserFeature parity with VS CodeGitHub IntegrationReal-world utilityProduction DeployedNot just a local demo